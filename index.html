<!DOCTYPE html>
<html>
<head>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
  <h3>MQTT Test</h3>
  <pre id="log"></pre>
<script>
function log(msg){
  document.getElementById("log").innerText += msg + "\n";
}

const broker = "wss://broker.hivemq.com:8884/mqtt";
const topic = "tm/test";
const clientId = "test_" + Math.random().toString(16).substr(2,8);

const client = mqtt.connect(broker, { clientId });

client.on("connect", ()=>{
  log("‚úÖ Connected to " + broker);
  client.subscribe(topic, ()=> log("Subscribed to " + topic));
  client.publish(topic, "Hello from Browser");
});

client.on("message", (t, m)=> log("üì© " + t + " => " + m.toString()));
client.on("error", err=> log("‚ùå Error: " + err.message));
client.on("offline", ()=> log("‚ö†Ô∏è Offline"));
</script>
</body>
</html>
